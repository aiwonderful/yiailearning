# 博客更新与维护流程

本文档详细介绍了当您需要向博客网站添加新文章或修改现有文章时的标准操作流程。遵循这些步骤可以确保网站内容、搜索功能和整体应用保持最新状态。

## 更新步骤

1.  **添加或编辑博文文件**:
    *   **位置**: 所有博文的 Markdown (`.md`) 文件都存放在项目根目录下的 `src/data/posts/` 文件夹中。
    *   **操作**:
        *   若要添加新文章，请在此文件夹中创建一个新的 `.md` 文件。
        *   若要修改现有文章，请直接编辑对应的 `.md` 文件。
    *   **Frontmatter (元数据)**: 每篇博文的 `.md` 文件头部都需要包含必要的元数据 (frontmatter)，用三短划线 (`---`) 包裹。这些元数据对于文章的展示和索引至关重要。至少应包含以下字段：
        ```yaml
        ---
        title: "你的文章标题"
        date: "YYYY-MM-DD" # 文章发布日期
        tags: ["标签1", "标签2"] # 文章标签，用于分类和搜索
        summary: "文章的简短摘要..." # 可选，但推荐填写
        # 其他自定义字段...
        ---
        
        你的文章正文（Markdown 格式）...
        ```
        git add .
        git commit -m "添加新博文: [您的博文标题]"
        git push origin main # (或者您配置为部署的主分支名称)
2.  **构建项目 (生成搜索索引并打包应用)**:
    *   完成博文内容的添加或修改后，您需要重新构建整个 Next.js 应用。此步骤会自动更新用于站内搜索的数据，并打包最新的应用代码。
    *   **操作**:
        1.  打开您的终端或命令行工具。
        2.  确保您当前位于项目的根目录下 (即包含 `package.json` 文件的目录)。
        3.  运行以下命令：
            ```bash
            npm run build
            ```
    *   **后台操作说明**:
        *   该 `npm run build` 命令首先会执行 `node scripts/build-search.js` 脚本。此脚本会遍历 `src/data/posts/` 目录下的所有博文，提取元数据和内容，并生成/更新 `public/search/search-data.json` 文件。这个 JSON 文件是 Fuse.js 客户端搜索功能的数据源。
        *   随后，该命令会执行 `next build`，这是 Next.js 的标准构建命令，它会编译和优化您的应用程序，准备用于生产部署。

3.  **部署应用**:
    *   当 `npm run build` 命令成功完成后，您的应用程序就已经准备好部署了。
    *   **操作**: 将构建产物部署到您的服务器或静态网站托管服务上。具体的部署步骤取决于您选择的托管平台 (例如 Vercel, Netlify, AWS, 或您自己的服务器)。
    *   通常，需要上传/同步的主要内容包括：
        *   `.next` 目录 (Next.js 的构建输出)
        *   `public` 目录 (包含更新后的 `search-data.json` 以及其他静态资源)
        *   其他必要的配置文件（视托管环境而定）

## 注意事项

*   **频繁更新**: 如果您频繁更新博客，建议将此流程熟悉并尽可能自动化（例如通过 CI/CD 流水线）。
*   **错误排查**: 如果在 `npm run build` 过程中遇到错误，请仔细阅读终端输出的错误信息，它们通常会指明问题所在。常见问题可能包括 Markdown 文件格式错误、元数据缺失或 `scripts/build-search.js` 脚本执行失败等。
*   **本地测试**: 在部署到生产环境之前，建议先在本地运行 `npm run start` 来预览构建后的应用，确保一切按预期工作。

遵循以上流程，可以确保您的博客内容和搜索功能始终保持同步和最新。 